<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="points">

	<select id="getpoint" parameterType="int" resultType="int">
		SELECT
			sum(POINT) POINTS
		FROM
			POINTS POINTS,
			RESERVATIONS RESERVATIONS,
			USERS USERS
		WHERE
			POINTS.RESERVE_NO = RESERVATIONS."NO"
			AND POINTS."NO" = USERS."NO"
			AND RESERVATIONS.user_no = #{userNo}

	</select> 

	 <insert id="pointsInsert" parameterType="com.javaex.vo.RePayVo">
				INSERT INTO POINTS (
						NO,
						RESERVE_NO,
						POINT,
						REG_DATE )
				VALUES (
				  		SEQ_POINTS_NO.nextval,
						#{no},
						TO_NUMBER('-'||#{point}),
						SYSDATE
						)
	</insert> 
	

</mapper>